!function(){var t={initialize:function(){self=this,"interactive"==document.readyState?self.setup():document.addEventListener("DOMContentLoaded",function(t){self.setup()})},setup:function(t){var e=document.querySelectorAll("sup[id^=fnref] a");e.length>0&&(Array.prototype.forEach.call(e,function(t){self.addFootnote(t)}),document.addEventListener("click",self.click.bind(self)),document.querySelector("div.footnotes").remove())},addFootnote:function(t){var o=e(t,"sup");o.insertAdjacentHTML("afterend",this.template.wrapper(t)),o.nextElementSibling.footnoteContent=this.template.footnoteContent(t),o.remove()},click:function(t){self=this;var o=e(t.target,".littlefoot-button");e(t.target,".littlefoot-container.is-open")||self.close(),o&&self.toggle(o)},resize:function(){self=this,window.clearTimeout(self.timeout),self.timeout=window.setTimeout(function(){self.sizeFootnote(),self.positionFootnote()},50)},toggle:function(t){this.footnote.el?this.close():this.open(t)},open:function(t){this.footnote.el=e(t,".littlefoot-container");var o=this.footnote.popover();this.footnote.el.classList.add("is-open"),this.sizeFootnote(),o.classList.remove("is-hidden"),this.positionFootnote(),o.classList.add("is-visible"),window.addEventListener("resize",self.resize.bind(self))},close:function(){if(this.footnote.el){var t=this.footnote.popover(),e=this.footnote.el;t.classList.remove("is-visible"),window.removeEventListener("resize",self.resize.bind(self)),this.footnote.el=null,setTimeout(function(){e.classList.remove("is-open"),t.classList.add("is-hidden")},250)}},footnote:{el:null,popover:function(){return this.el?this.el.querySelector(".littlefoot-popover"):void 0},panel:function(){return this.el?this.el.querySelector(".littlefoot-footnote"):void 0}},positionFootnote:function(){panel=this.footnote.panel(),panel&&panel.offsetWidth>0&&(this.setOrientation(),this.setPosition())},setOrientation:function(){var t=this.footnote.el;t.classList.remove("open-up","open-down"),t.classList.add("open-down");var e=this.footnote.panel().getBoundingClientRect();t.classList.remove("open-up","open-down"),e.bottom>window.innerHeight?t.classList.add("open-up"):t.classList.add("open-down")},setPosition:function(){var t=this.footnote.el.parentElement,e=t.offsetWidth,o=this.footnote.panel(),n=this.footnote.el.offsetLeft-t.offsetLeft,i=o.offsetWidth+n;o.setAttribute("style",""),i>e&&o.setAttribute("style","left: -"+String(i-e)+"px;")},sizeFootnote:function(){var t=this.footnote.el.parentElement,e=document.createElement("div");e.insertAdjacentHTML("beforeend",'<div class="littlefoot-test-wrapper"><div class="littlefoot-test">'+this.footnote.el.footnoteContent+"</div></div>"),t.appendChild(e);var o={h:e.firstChild.offsetHeight+5,w:e.firstChild.offsetWidth+5};t.removeChild(e),this.footnote.el.querySelector(".littlefoot-footnote-content").setAttribute("style","max-width:"+o.w+"px;")},template:{wrapper:function(t){return' <div class="littlefoot-container open-down">'+this.button(t)+this.popover(t)+"</div>"},button:function(t){return'<button class="littlefoot-button" title="view footnote #'+t.textContent+'"><svg class="littlefoot-graphic" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 98"><path class="littlefoot-graphic-path" fill="#fff" d="M200 25c0-13.8-11.2-25-25-25H25C11.2 0 0 11.2 0 25v48c0 13.8 11.2 25 25 25h150c13.8 0 25-11.2 25-25V25zM50.5 64.3c-8.3 0-15-6.7-15-15s6.7-15 15-15 15 6.7 15 15-6.8 15-15 15zm50 0c-8.3 0-15-6.7-15-15s6.7-15 15-15 15 6.7 15 15-6.8 15-15 15zm49 0c-8.3 0-15-6.7-15-15s6.7-15 15-15 15 6.7 15 15-6.8 15-15 15z"/></svg></button>'},popover:function(t){return'<aside class="littlefoot-popover is-hidden"><div class="littlefoot-footnote"><div class="littlefoot-footnote-wrapper"><div class="littlefoot-footnote-content">'+this.footnoteContent(t)+'</div></div></div><div class="littlefoot-popover-triangle"></div></aside>'},footnoteContent:function(t){var e=t.getAttribute("href").replace(":","\\:"),o=document.querySelector(e),n=o.querySelector("a[href^=\\#fnref]");n&&n.remove();o.offsetParent.parentElement.offsetWidth;return o.innerHTML}}},e=function(t,e){var o,n=t;for(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"].some(function(t){return"function"==typeof document.body[t]?(o=t,!0):!1});null!==n;){if(null!==n&&n[o](e))return n;n=n.parentElement}};t.initialize(),window.LittleFoot=t}();