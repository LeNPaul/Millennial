I"±5<p>Particulate matter 2.5 (PM2.5) is a carcinogenic material associated with adverse cardiovascular events and cancer incidence. In the winter, Utah experiences acute inversions which trap particulates close to the urban population. The study of these particulates are critical in helping the Utahn population properly mitigate exposure. Herein, a GIS analysis is performed on scraped, hourly PurpleAir and AirNow PM2.5 exposures from April 7th-14th. Primary findings demonstrate PurpleAir sensors to have better rural coverage and decreased accuracy when compared to the Environmental Protection Agency‚Äôs (EPA) AirNow measurements.</p>

<h2 id="background">Background</h2>
<p>The Salt Lake City basin is an established outdoor kingpin with a rapidly expanding technology sector. The geographic shape of the region leads to ‚Äúsinkholes‚Äù of pollution with notably high concentrations of particulate matter and ozone. With reduced wind and precipitation, warm air traps pollutants in the basin resulting in high pollutant concentrations, breathable by city dwellers. These trapped toxins are dangerous to human health. Particulate matter 2.5 (PM2.5) is robustly associated with many negative disease outcomes including non-fatal heart attacks, asthma and increased cancer risk.</p>

<p><img src="/assets/img/inversion.JPG" alt="Inversion from Mt. Baldy, Alta" class="project-featured-image" /></p>

<h2 id="data-collection">Data Collection</h2>
<p>Two entities which monitor and predict particulate matter concentrations are the Environmental Protection Agency (EPA) and Purple Air. The EPA tracks air quality in real-time via a network of sensors known as <a href="https://www.airnow.gov/">AirNow</a>. These data are available at minute intervals, starting in 1990, via an API on their website. The spatial coverage in Utah is limited since there are only a few sensors (N=27 in 2020) nearby areas of high urban density. <a href="https://www2.purpleair.com/">PurpleAir</a> (1030 Legacy Sensors and 524 Experimental Sensors in 2020) publicly release real-time data via a web portal with no back-log. One advantage to PurpleAir data is its widespread spatial coverage, especially in the Salt Lake City basin. [DISCLOSE ABOUT THE ACCURACY]</p>

<p><img src="/assets/img/sensor_locations.png" alt="Sensor Locations" class="project-featured-image" /></p>

<p>AirNow and PurpleAir sensors detect several different pollutants including particulate matter and ozone. PurpleAir tracks a greater number of particulates, notably PM2.5, PM10 and volatile organic compounds while AirNow sensors only record PM2.5. Additionally, PurpleAir sensors measure temperature, humidity, and pressure. Within Utah, the tracking, analysis and forecasting of PM2.5 is critical in protecting public health. Few studies analyze the PurpleAir data as public data access is limited. In order to explore how the COVID-19 pandemic stay-at-home guidelines are affecting air quality in Utah, I collected and analyzed hourly PM2.5 data from PurpleAir and EPA AirNow for the week of April 7th to 14th. Please note, both data repositories are publicly accessible. Often, PurpleAir sensors are placed on residential properties and users have consented for their information to be shared publicly. AirNow sensor data are curated and released by the EPA. Data does not contain any information about the property or residents, simply the location (Lat/Lon). For additional questions concerning data privacy, please visit the <a href="https://www2.purpleair.com/policies/privacy-policy">PurpleAir</a> <a href="https://docs.airnowapi.org/faq">AirNow</a> websites.</p>

<p>Hourly AirNow measurements were queried from their <a href="https://docs.airnowapi.org/">API</a>from April 7th to April 14th for 2019 and 2020. The PurpleAir data collection was a bit more complex as data had to be collected in real-time and downloaded to a local database. In order to automate this task, a directed acyclical graph (DAG) was created in Apache Airflow. This program collected hourly measurements starting April 7th at 5:00 AM MST till April 14th at 5:00AM MST. Code for this application can be found within the repository under <a href="needgithublink">purp_air.py</a>. It was necessary to run this program with an Airflow pipeline as the collection <a href="https://docs.google.com/document/d/15ijz94dXJ-YAZLi9iZ_RaBwrZ4KtYeCy08goGBwnbCU/edit">link</a> was inconsistent, occasionally rejecting requests. Airflow is capable hierarchical collection, forcing the program to retry until collection was completed.</p>

<h2 id="data-cleaning">Data Cleaning</h2>
<p>Data cleaning represented the crux of this project due to data sparsity and standardization. The PurpleAir data contained roughly 170,000 entries recorded by 1,030 sensors. Any sensors which showcased values over 150 [CONC] where removed as no areas in Utah has remarkably high PM2.5 during the chosen analysis week. Visualization of the null values showcased the PurpleAir data to be missing approximately 6% of PM2.5 values and 45% of weather variables such as pressure, temperature and humidity. The AirNow data contained no missing values. In order to fill the PurpleAir missing values, an algorithm was created to fill values based upon the closest sensor, both in space and time. This filling process was not perfect and several values had to be annotated by hand. For this subset, values were filled with the global average of the data. After running, several points had to be dealt with by hand as no other sensors of reasonable proximity had data for the desired time point.</p>

<p><img src="/assets/img/preplot_nearest_sensor.png" width="400" height="400" /></p>

<p>Once the missing data was filled, the accuracy of the PurpleAir sensor data was examined. In order to gauge error, average PM2.5 levels were calculated for zip-code level aggregations which contained both PurpleAir and AirNow sensors (Average per zip: 13 PurpleAir and 1 AirNow). On average, the PurpleAir sensors differed by 2.06 ug/m^3, a value greater than one standard deviation of the AirNow data (std = 1.27 ug/m^3). While the zip-code aggregation introduces some error to this analysis, the difference is great enough to conclude the PurpleAir data is significantly inaccurate.</p>

<p><img src="/assets/img/sensor_diffs.png" width="400" height="400" /></p>

<p>Modeling was tested as method to alleviate the error of the PurpleAir measurements. Multiple-linear regression was performed to predict the zip-code level AirNow concentrations from the zip-code aggregated PurpleAir PM2.5 and associated meteorological variables alongside an approximate time variable. As expected, the explained variance was low, ~55%, implying there was no reliable method to adjust the PurpleAir concentrations to reflect the AirNow sensor accuracy. In order to avoid erroneous conclusions, only the trends of the PurpleAir data were analyzed. With more data, better models might be developed to properly adjust the PurpleAir concentrations so accuracy could be improved. Unfortunately, the AirNow coverage is limited to urban-dense areas so model generalizability to rural areas would be unlikely.</p>

<h2 id="analysis">Analysis</h2>
<p>Daily and hourly PM2.5 concentrations was analyzed with zip code level aggregation for both PurpleAir and EPA AirNow measurements. Overall, PM2.5 concentrations in the state of Utah were below 10 for the week of April 7th ‚Äì 14th for both 2019 and 2020. This is unsurprising as the air quality was recorded as ‚Äúgood‚Äù with no stay in advisories for both years. The weather was sunny and without heavy wind allowing for reliable sensor measurements, although two methods of quantification still exhibit disagreement.</p>

<p><img src="/assets/img/state_aggregates.png" width="1000" height="400" /></p>

<p>Zip code analysis of PurpleAir PM2.5 concentrations elucidated up-regulated PM2.5 in Zip Codes XXX which translate into the counties of Coalville, Goshen and North Logan.</p>

<p><img src="/assets/img/coalville_lineplot.png" alt="Coalville upregulated PM2.5" /></p>

<p>These observations were missed by the AirNow monitors due to their limited spatial coverage. This emphasizes one strength of the PurpleAir data: spatial coverage for rural populations! While these measures may not be highly precise, they allow for general trend capture which may help alert sensitive populations to stay inside to minimize risk of an adverse health event.</p>

<p><img src="/assets/img/Rural_Sensor_cover_more.png" alt="Sparsity" /></p>

<p>Examination of daily trends showcased that AirNow monitors may also smooth their data, as temporal cycles expected in PM2.5 concentration due to wind and anthropocentric factors were indistinguishable. In contrast, PurpleAir data is more sensitive to these cycles with some evidence of bimodal daily peaks around 9AM and 5PM. This suspicion is confirmed by AirNow and PurpleAir <a href="https://www2.purpleair.com/community/faq#!hc-how-do-purpleair-sensors-compare-to-regulatory-particulate-matter-sensors">documentation</a> which showcases the Airnow data to use 24 hour smoothing filter. When smoothed with a 24 hour rolling filter, the PurpleAir data appears to mirror the trends of the AirNow data, although the magnitude of the concentrations remain inaccurate inaccurate.</p>

<p><img src="/assets/img/hourlypm25_84105.png" alt="PurpleAir vs EPA AirNow" />
<img src="/assets/img/smoothed_purpleair.png" alt="Smoothed PurpleAir" /></p>

<h2 id="limitations-and-future-plans">Limitations and Future Plans</h2>
<p>The purpose of this project was to explore how the COVID-19 stay-at-home orders affected the air quality within the state of Utah. Unfortunately, the size of data, sensor accuracy and season of analysis severely dampen the significance of any conclusions reached. Overall, a weeks worth of hourly data was collected for &gt;1000 sensors equating to roughly 200,000 data points. These data were spatially concentrate in the Salt Lake Basin and failed to have good representation in rural cities. As a whole, PM2.5 is affected by many highly variable factors such as meteorology and traffic patterns. Much more data would be necessary to concretely isolate signal from noise. The method of PM2.5 concentration calculation differs between PurpleAir and AirNow sensors further confounding the accuracy of measurements. PurpleAir sensors use a <a href="https://www2.purpleair.com/community/faq#!hc-how-do-purpleair-sensors-compare-to-regulatory-particulate-matter-sensors">laser particle counter</a> while AirNow sensors use a <a href="https://www2.purpleair.com/community/faq#!hc-how-do-purpleair-sensors-compare-to-regulatory-particulate-matter-sensors">filter weight measurement</a>. While more accurate, the AirNow sensors are more expensive and harder to maintain. In order to make the sensors widely available to the public, PurpleAir sensors have reduced accuracy, subject to miscalculation during times of precipitation as the moisture occludes the laser quantification. The sensor quantification methods and resulting error limit the accuracy of any conclusions. To combat this spatial aggregation and averaging was utilized in any comparison in an attempt better model the air quality. Finally, PM2.5 concentrations in Utah are highly dependent on the season, with winter months (Dec-Mar) being notorious for poor air quality. As the examined data does not include any seasonality, it fails to examine days where the air pollution is particularly hazardous. As such, distinguishing any noticeable difference correlated with the COVID-19 stay-at-home orders as the signal of interest is muddled by sensor noise. In total, this analysis best serves as practice with collecting, manipulating and visualizing geospatial data in python as any conclusions are occluded by small data size, sensor accuracy and seasonality.</p>

<p>In the future</p>
<ul>
  <li>More data enables a lot of stuff
    <ul>
      <li>better prediction (talk about LSTMS and the cyclical nature. Best to have a few decades of information)</li>
      <li>Better coverage over more ‚Äúbad air days‚Äù</li>
    </ul>
  </li>
  <li>
    <p>Try different filling to see the spatial variability</p>
  </li>
  <li>Note the EPA disclosure and the problem with waiting for non-real time monitoring concentrations</li>
</ul>

<h2 id="conclusion">Conclusion</h2>
<p>Utah showcased non-hazardous levels of PM2.5 for the week of April 7th, in both 2019 and 2020. Through this biased lens, it appears the COVID-19 stay-at-home orders did not reduce PM2.5 levels despite reduced driving and business. These results are arbitrary as the data sample size limits the impact of the analysis and the conclusions are confounded by factors such as season and spike.</p>

<p>This analysis best serves to demonstrate the ‚Äúwrangling‚Äù attitude necessary to tease meaning from unrefined spatial and temporal data. There is noticeable, unpredictable error between the PurpleAir and AirNow PM2.5 measurements making the magnitude of exposure difficult to quantify. PurpleAir sensors have higher spatial representation in Utah than AirNow sensors which may be beneficial in alerting rural populations of toxic air. This greater spacial variability is partially due to an increased number of PurpleAir Sensors. In total, the PurpleAir data represents a data-resource for fine spatial monitoring of rural and urban PM2.5 concentrations. These data are best used for teasing apart general air quality trends and accentuate the need for improved real-time monitors which are inexpensive and accessible.</p>

<p>Visually though (my biased view of course!), the haze seems lessened with the sunsets shimmering onward wondrously.</p>
:ET